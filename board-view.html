<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Board</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background-color: rgb(55, 36, 73);
        }
        .board-container { 
            display: grid;
            height: 1000px;
            width: 1000px;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(8, 1fr);
        }

        .tile {
            display: grid;
            grid-template-columns: 20% 60% 20%;
            grid-template-rows: 20% 60% 20%;
            filter: none;
        }

        /*
        Tile should be occupied by piece
        .tile:hover {
            background-color: aquamarine;
        }
        
        */

        .tile-number {
            display: block; /*display: none*/
            grid-row-start: 1;
            grid-row-end: 2;
            grid-column-start: 1; 
            grid-column-end: 2; 
        }
        /* game entities: rook, pawn, etc. */ 
        .tile-value {
            display: flex;
            justify-content: center;
            align-items: center;
            grid-row-start: 2;
            grid-row-end: 3;
            grid-column-start: 2; 
            grid-column-end: 3;
        }

        .black-tile {
            background-color: rgb(39, 39, 39);
            color: white;
        }
        .white-tile {
            background-color: white;
            color: black;
        }

        #testimg {
            width: 75;
            height: 75;
        }
    </style>
</head>
<body>
    <div id="board-container" class="board-container">
        <!-- Row 8 -->
        <div id="a8" class="tile white-tile">
            <div class="tile-number">a8</div>
            <div class="tile-value"></div>
        </div>
        <div id="b8" class="tile black-tile">
            <div class="tile-number">b8</div>
            <div class="tile-value"></div>
        </div>
        <div id="c8" class="tile white-tile">
            <div class="tile-number">c8</div>
            <div class="tile-value"></div>
        </div>
        <div id="d8" class="tile black-tile">
            <div class="tile-number">d8</div>
            <div class="tile-value"></div>
        </div>
        <div id="e8" class="tile white-tile">
            <div class="tile-number">e8</div>
            <div class="tile-value"></div>
        </div>
        <div id="f8" class="tile black-tile">
            <div class="tile-number">f8</div>
            <div class="tile-value"></div>
        </div>
        <div id="g8" class="tile white-tile">
            <div class="tile-number">g8</div>
            <div class="tile-value"></div>
        </div>
        <div id="h8" class="tile black-tile">
            <div class="tile-number">h8</div>
            <div class="tile-value"></div>
        </div>
        

        <!-- Row 7 -->
        <div id="a7" class="tile black-tile">
            <div class="tile-number">a7</div>
            <div class="tile-value"></div>
        </div>
        <div id="b7" class="tile white-tile">
            <div class="tile-number">b7</div>
            <div class="tile-value"></div>
        </div>
        <div id="c7" class="tile black-tile">
            <div class="tile-number">c7</div>
            <div class="tile-value"></div>
        </div>
        <div id="d7" class="tile white-tile">
            <div class="tile-number">d7</div>
            <div class="tile-value"></div>
        </div>
        <div id="e7" class="tile black-tile">
            <div class="tile-number">e7</div>
            <div class="tile-value"></div>
        </div>
        <div id="f7" class="tile white-tile">
            <div class="tile-number">f7</div>
            <div class="tile-value"></div>
        </div>
        <div id="g7" class="tile black-tile">
            <div class="tile-number">g7</div>
            <div class="tile-value"></div>
        </div>
        <div id="h7" class="tile white-tile">
            <div class="tile-number">h7</div>
            <div class="tile-value"></div>
        </div>
        
        
        <!-- Row 6 -->
        <div id="a6" class="tile white-tile">
            <div class="tile-number">a6</div>
            <div class="tile-value"></div>
        </div>
        <div id="b6" class="tile black-tile">
            <div class="tile-number">b6</div>
            <div class="tile-value"></div>
        </div>
        <div id="c6" class="tile white-tile">
            <div class="tile-number">c6</div>
            <div class="tile-value"></div>
        </div>
        <div id="d6" class="tile black-tile">
            <div class="tile-number">d6</div>
            <div class="tile-value"></div>
        </div>
        <div id="e6" class="tile white-tile">
            <div class="tile-number">e6</div>
            <div class="tile-value"></div>
        </div>
        <div id="f6" class="tile black-tile">
            <div class="tile-number">f6</div>
            <div class="tile-value"></div>
        </div>
        <div id="g6" class="tile white-tile">
            <div class="tile-number">g6</div>
            <div class="tile-value"></div>
        </div>
        <div id="h6" class="tile black-tile">
            <div class="tile-number">h6</div>
            <div class="tile-value"></div>
        </div>
        

        <!-- Row 5 -->
        <div id="a5" class="tile black-tile">
            <div class="tile-number">a5</div>
            <div class="tile-value"></div>
        </div>
        <div id="b5" class="tile white-tile">
            <div class="tile-number">b5</div>
            <div class="tile-value"></div>
        </div>
        <div id="c5" class="tile black-tile">
            <div class="tile-number">c5</div>
            <div class="tile-value"></div>
        </div>
        <div id="d5" class="tile white-tile">
            <div class="tile-number">d5</div>
            <div class="tile-value"></div>
        </div>
        <div id="e5" class="tile black-tile">
            <div class="tile-number">e5</div>
            <div class="tile-value"></div>
        </div>
        <div id="f5" class="tile white-tile">
            <div class="tile-number">f5</div>
            <div class="tile-value"></div>
        </div>
        <div id="g5" class="tile black-tile">
            <div class="tile-number">g5</div>
            <div class="tile-value"></div>
        </div>
        <div id="h5" class="tile white-tile">
            <div class="tile-number">h5</div>
            <div class="tile-value"></div>
        </div>
        

        <!-- Row 4 -->
        <div id="a4" class="tile white-tile">
            <div class="tile-number">a4</div>
            <div class="tile-value"></div>
        </div>
        <div id="b4" class="tile black-tile">
            <div class="tile-number">b4</div>
            <div class="tile-value"></div>
        </div>
        <div id="c4" class="tile white-tile">
            <div class="tile-number">c4</div>
            <div class="tile-value"></div>
        </div>
        <div id="d4" class="tile black-tile">
            <div class="tile-number">d4</div>
            <div class="tile-value"></div>
        </div>
        <div id="e4" class="tile white-tile">
            <div class="tile-number">e4</div>
            <div class="tile-value"></div>
        </div>
        <div id="f4" class="tile black-tile">
            <div class="tile-number">f4</div>
            <div class="tile-value"></div>
        </div>
        <div id="g4" class="tile white-tile">
            <div class="tile-number">g4</div>
            <div class="tile-value"></div>
        </div>
        <div id="h4" class="tile black-tile">
            <div class="tile-number">h4</div>
            <div class="tile-value"></div>
        </div>
        

        <!-- Row 3 -->
        <div id="a3" class="tile black-tile">
            <div class="tile-number">a3</div>
            <div class="tile-value"></div>
        </div>
        <div id="b3" class="tile white-tile">
            <div class="tile-number">b3</div>
            <div class="tile-value"></div>
        </div>
        <div id="c3" class="tile black-tile">
            <div class="tile-number">c3</div>
            <div class="tile-value"></div>
        </div>
        <div id="d3" class="tile white-tile">
            <div class="tile-number">d3</div>
            <div class="tile-value"></div>
        </div>
        <div id="e3" class="tile black-tile">
            <div class="tile-number">e3</div>
            <div class="tile-value"></div>
        </div>
        <div id="f3" class="tile white-tile">
            <div class="tile-number">f3</div>
            <div class="tile-value"></div>
        </div>
        <div id="g3" class="tile black-tile">
            <div class="tile-number">g3</div>
            <div class="tile-value"></div>
        </div>
        <div id="h3" class="tile white-tile">
            <div class="tile-number">h3</div>
            <div class="tile-value"></div>
        </div>
        
        
        <!-- Row 2 -->
        <div id="a2" class="tile white-tile">
            <div class="tile-number">a2</div>
            <div class="tile-value"></div>
        </div>
        <div id="b2" class="tile black-tile">
            <div class="tile-number">b2</div>
            <div class="tile-value"></div>
        </div>
        <div id="c2" class="tile white-tile">
            <div class="tile-number">c2</div>
            <div class="tile-value"></div>
        </div>
        <div id="d2" class="tile black-tile">
            <div class="tile-number">d2</div>
            <div class="tile-value"></div>
        </div>
        <div id="e2" class="tile white-tile">
            <div class="tile-number">e2</div>
            <div class="tile-value"></div>
        </div>
        <div id="f2" class="tile black-tile">
            <div class="tile-number">f2</div>
            <div class="tile-value"></div>
        </div>
        <div id="g2" class="tile white-tile">
            <div class="tile-number">g2</div>
            <div class="tile-value"></div>
        </div>
        <div id="h2" class="tile black-tile">
            <div class="tile-number">h2</div>
            <div class="tile-value"></div>
        </div>

        <!-- Row 1 -->
        <div id="a1" class="tile black-tile">
            <div class="tile-number">a1</div>
            <div class="tile-value"></div>
        </div>
        <div id="b1" class="tile white-tile">
            <div class="tile-number">b1</div>
            <div class="tile-value"></div>
        </div>
        <div id="c1" class="tile black-tile">
            <div class="tile-number">c1</div>
            <div class="tile-value"></div>
        </div>
        <div id="d1" class="tile white-tile">
            <div class="tile-number">d1</div>
            <div class="tile-value"></div>
        </div>
        <div id="e1" class="tile black-tile">
            <div class="tile-number">e1</div>
            <div class="tile-value"></div>
        </div>
        <div id="f1" class="tile white-tile">
            <div class="tile-number">f1</div>
            <div class="tile-value"></div>
        </div>
        <div id="g1" class="tile black-tile">
            <div class="tile-number">g1</div>
            <div class="tile-value"></div>
        </div>
        <div id="h1" class="tile white-tile">
            <div class="tile-number">h1</div>
            <div class="tile-value"></div>
        </div>

        
    </div>

    
    <script>
        //Todo: Bilder von Figuren mit outlines finden, die man AUCH ERKENNEN KANN AUF DEM FELD, Danke Wikipedia
        //Quickfix: Schwarze Felder Dunkelgrau machen
        //Load Res
        //0.6 * 125 = 75, 
        //125 = Tile width/height, to fit in grid cell which has 0.6 relative space in both x and y
        //need to instantiate every single image to prevent overwriting 
        const white_pawn_a = new Image(75);
        const white_pawn_b = new Image(75);
        const white_pawn_c = new Image(75);
        const white_pawn_d = new Image(75);
        const white_pawn_e = new Image(75);
        const white_pawn_f = new Image(75);
        const white_pawn_g = new Image(75);
        const white_pawn_h = new Image(75);

        const black_pawn_a = new Image(75);
        const black_pawn_b = new Image(75);
        const black_pawn_c = new Image(75);
        const black_pawn_d = new Image(75);
        const black_pawn_e = new Image(75);
        const black_pawn_f = new Image(75);
        const black_pawn_g = new Image(75);
        const black_pawn_h = new Image(75);


        const white_knight_b = new Image(75);
        const white_knight_g = new Image(75);

        const black_knight_b = new Image(75);
        const black_knight_g = new Image(75);


        const white_bishop_c = new Image(75);
        const white_bishop_f = new Image(75);

        const black_bishop_c = new Image(75);
        const black_bishop_f = new Image(75);


        const white_rook_a = new Image(75);
        const white_rook_h = new Image(75);

        const black_rook_a = new Image(75);
        const black_rook_h = new Image(75);

        
        const white_king = new Image(75);
        const black_king = new Image (75) 
        
        const white_queen = new Image(75);
        const black_queen = new Image(75);



        white_pawn_a.src = "/res/Chess_plt60.png";
        white_pawn_b.src = "/res/Chess_plt60.png";;
        white_pawn_c.src = "/res/Chess_plt60.png";;
        white_pawn_d.src = "/res/Chess_plt60.png";;
        white_pawn_e.src = "/res/Chess_plt60.png";;
        white_pawn_f.src = "/res/Chess_plt60.png";;
        white_pawn_g.src = "/res/Chess_plt60.png";;
        white_pawn_h.src = "/res/Chess_plt60.png";;
  

        black_pawn_a.src = "/res/Chess_pdt60.png";
        black_pawn_b.src = "/res/Chess_pdt60.png";
        black_pawn_c.src = "/res/Chess_pdt60.png";
        black_pawn_d.src = "/res/Chess_pdt60.png";
        black_pawn_e.src = "/res/Chess_pdt60.png";
        black_pawn_f.src = "/res/Chess_pdt60.png";
        black_pawn_g.src = "/res/Chess_pdt60.png";
        black_pawn_h.src = "/res/Chess_pdt60.png";
    
        
        white_knight_b.src = "/res/Chess_nlt60.png";
        white_knight_g.src = "/res/Chess_nlt60.png";

        black_knight_b.src = "/res/Chess_ndt60.png";
        black_knight_g.src = "/res/Chess_ndt60.png";


        white_bishop_c.src = "/res/Chess_blt60.png"; 
        white_bishop_f.src = "/res/Chess_blt60.png"; 

        black_bishop_c.src = "/res/Chess_bdt60.png"; 
        black_bishop_f.src = "/res/Chess_bdt60.png"; 


        white_rook_a.src = "/res/Chess_rlt60.png";
        white_rook_h.src = "/res/Chess_rlt60.png";

        black_rook_a.src = "/res/Chess_rdt60.png"; 
        black_rook_h.src = "/res/Chess_rdt60.png"; 

        
        white_king.src = "/res/Chess_klt60.png"; 
        black_king.src = "/res/Chess_kdt60.png"; 
        
        white_queen.src = "/res/Chess_qlt60.png"; 
        black_queen.src = "/res/Chess_qdt60.png"; 



        //Create References of every single tile to render pieces there
        const a1 = document.getElementById("a1").children[1];
        const a2 = document.getElementById("a2").children[1];
        const a3 = document.getElementById("a3").children[1];
        const a4 = document.getElementById("a4").children[1];
        const a5 = document.getElementById("a5").children[1];
        const a6 = document.getElementById("a6").children[1];
        const a7 = document.getElementById("a7").children[1];
        const a8 = document.getElementById("a8").children[1];

        const b1 = document.getElementById("b1").children[1];
        const b2 = document.getElementById("b2").children[1];
        const b3 = document.getElementById("b3").children[1];
        const b4 = document.getElementById("b4").children[1];
        const b5 = document.getElementById("b5").children[1];
        const b6 = document.getElementById("b6").children[1];
        const b7 = document.getElementById("b7").children[1];
        const b8 = document.getElementById("b8").children[1];

        const c1 = document.getElementById("c1").children[1];
        const c2 = document.getElementById("c2").children[1];
        const c3 = document.getElementById("c3").children[1];
        const c4 = document.getElementById("c4").children[1];
        const c5 = document.getElementById("c5").children[1];
        const c6 = document.getElementById("c6").children[1];
        const c7 = document.getElementById("c7").children[1];
        const c8 = document.getElementById("c8").children[1];

        const d1 = document.getElementById("d1").children[1];
        const d2 = document.getElementById("d2").children[1];
        const d3 = document.getElementById("d3").children[1];
        const d4 = document.getElementById("d4").children[1];
        const d5 = document.getElementById("d5").children[1];
        const d6 = document.getElementById("d6").children[1];
        const d7 = document.getElementById("d7").children[1];
        const d8 = document.getElementById("d8").children[1];

        const e1 = document.getElementById("e1").children[1];
        const e2 = document.getElementById("e2").children[1];
        const e3 = document.getElementById("e3").children[1];
        const e4 = document.getElementById("e4").children[1];
        const e5 = document.getElementById("e5").children[1];
        const e6 = document.getElementById("e6").children[1];
        const e7 = document.getElementById("e7").children[1];
        const e8 = document.getElementById("e8").children[1];

        const f1 = document.getElementById("f1").children[1];
        const f2 = document.getElementById("f2").children[1];
        const f3 = document.getElementById("f3").children[1];
        const f4 = document.getElementById("f4").children[1];
        const f5 = document.getElementById("f5").children[1];
        const f6 = document.getElementById("f6").children[1];
        const f7 = document.getElementById("f7").children[1];
        const f8 = document.getElementById("f8").children[1];

        const g1 = document.getElementById("g1").children[1];
        const g2 = document.getElementById("g2").children[1];
        const g3 = document.getElementById("g3").children[1];
        const g4 = document.getElementById("g4").children[1];
        const g5 = document.getElementById("g5").children[1];
        const g6 = document.getElementById("g6").children[1];
        const g7 = document.getElementById("g7").children[1];
        const g8 = document.getElementById("g8").children[1];

        const h1 = document.getElementById("h1").children[1];
        const h2 = document.getElementById("h2").children[1];
        const h3 = document.getElementById("h3").children[1];
        const h4 = document.getElementById("h4").children[1];
        const h5 = document.getElementById("h5").children[1];
        const h6 = document.getElementById("h6").children[1];
        const h7 = document.getElementById("h7").children[1];
        const h8 = document.getElementById("h8").children[1];

        
        
       


        function logical_boardstate()
        {}


        //renders board state primitive recursively from last played ply 
        //needs game history to look up player move
        //if arg == 0: initial board state
        function render_current_boardstate(last_ply_idx)
        {
            if(last_ply_idx == 0)
            {
                //WHITE TEAM
                a1.append(white_rook_a);
                h1.append(white_rook_h);
                b1.append(white_knight_b);
                g1.append(white_knight_g);
                c1.append(white_bishop_c);
                f1.append(white_bishop_f); 
                d1.append(white_queen);
                e1.append(white_king);

                a2.append(white_pawn_a);
                b2.append(white_pawn_b);
                c2.append(white_pawn_c);
                d2.append(white_pawn_d);
                e2.append(white_pawn_e);
                f2.append(white_pawn_f);
                g2.append(white_pawn_g);
                h2.append(white_pawn_h);

                //BLACK TEAM 
                a8.append(black_rook_a);
                h8.append(black_rook_h);
                b8.append(black_knight_b);
                g8.append(black_knight_g);
                c8.append(black_bishop_c);
                f8.append(black_bishop_f); 
                d8.append(black_queen);
                e8.append(black_king);

                a7.append(black_pawn_a);
                b7.append(black_pawn_b);
                c7.append(black_pawn_c);
                d7.append(black_pawn_d);
                e7.append(black_pawn_e);
                f7.append(black_pawn_f);
                g7.append(black_pawn_g);
                h7.append(black_pawn_h);
            }
        }

        render_current_boardstate(0);

        //Color in the tile, the player clicked on
        function playerChoice(tile_id)
        {
            //if()
        }

        //highlight interactable tiles 
        //query all tiles and check for empty children of child[1]
        //doesn't matter which piece only whether tile is occupied

        //entire DOM class object
        const tile_values_dom = document.getElementsByClassName("tile");
       

        const board_container = document.getElementById("board-container");
        console.log(board_container);


        /*
        UNOCCUPIED TILE
        <div id="a8" class="tile white-tile">
            <div class="tile-number">a8</div>
            <div class="tile-value"></div>
        </div>

        OCCUPIED TILE
        <div id="a8" class="tile white-tile">
            <div class="tile-number">a8</div>
            <div class="tile-value">
                <img width="75" src="/res/Chess_rlt60.png">    
            </div>
        </div>
        */

        //alternativ: Toggle checkbox
        //remember last clicked tile and always reset it no matter what
        //Idee: event soll so lange in tiefe suchen bis er auf tile stößt
        let count = 0;
        board_container.addEventListener("click", (event) => {

            //console.log("Target an sich:", event.target);
            //console.log(count, count%2, event.target.className.substring(5, 10));
            let tile_color = event.target.className.substring(5, 10); 
            let tile_instance = event.target;
            
            if(event.target.tagName === 'IMG')
            {
                //console.log(event.target.parentElement.parentElement.className.substring(5, 10));
                tile_color = event.target.parentElement.parentElement.className.substring(5, 10);
                tile_instance = event.target.parentElement.parentElement;
            }
            else if (event.target.className === 'tile-value' || event.target.className === 'tile-number')
            {
                //console.log(event.target.parentElement.className.substring(5, 10));
                tile_color = event.target.parentElement.className.substring(5, 10);
                tile_instance = event.target.parentElement;
            }
            
            if(tile_color === 'white')
            {
                count++;
                if(count % 2 === 1)
                    tile_instance.style.backgroundColor = "aquamarine";
                else 
                    tile_instance.style.backgroundColor = "white";
            }
            else if(tile_color === 'black')
            {
                count++;
                if(count % 2 === 1)
                    tile_instance.style.backgroundColor = "aquamarine";
                else 
                    tile_instance.style.backgroundColor = "rgb(39, 39, 39)";
            }
            
        });
        
               
      
        function check_if_occupied()
        {
                tile_values.style.backgroundColor = "aquamarine";   
        }
        


    </script>
</body>


</html>

